<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/integration"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:beans="http://www.springframework.org/schema/beans"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
			http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
			http://www.springframework.org/schema/integration
			http://www.springframework.org/schema/integration/spring-integration-core-1.0.xsd">

	<message-bus auto-startup="false"/>

	<channel id="testChannel"/>

	<channel id="replyChannel"/>

	<service-activator id="handlerEndpointWithBeanInterceptors"
	                   input-channel="testChannel"
	                   ref="testHandler"
	                   output-channel="replyChannel">
		<schedule period="100"/>
		<interceptors>
			<beans:bean class="org.springframework.integration.config.TestPreSendInterceptor"/>
			<beans:bean class="org.springframework.integration.config.TestAroundSendEndpointInterceptor"/>
		</interceptors>
	</service-activator>

	<service-activator id="handlerEndpointWithRefInterceptors"
	                   input-channel="testChannel"
	                   ref="testHandler"
	                   output-channel="replyChannel">
		<schedule period="100"/>
		<interceptors>
			<ref bean="preInterceptor"/>
			<ref bean="aroundInterceptor"/>
		</interceptors>
	</service-activator>

	<channel-adapter id="targetEndpointWithBeanInterceptors"
	                 channel="testChannel"
	                 target="testTarget">
		<schedule period="100"/>
		<interceptors>
			<beans:bean class="org.springframework.integration.config.TestPreSendInterceptor"/>
			<beans:bean class="org.springframework.integration.config.TestAroundSendEndpointInterceptor"/>
		</interceptors>
	</channel-adapter>

	<channel-adapter id="targetEndpointWithRefInterceptors"
	                 channel="testChannel"
	                 target="testTarget">
		<schedule period="100"/>
		<interceptors>
			<ref bean="preInterceptor"/>
			<ref bean="aroundInterceptor"/>
		</interceptors>
	</channel-adapter>

	<channel-adapter id="sourceEndpointWithBeanInterceptors"
	                 source="testSource"
	                 channel="testChannel">
		<schedule period="100"/>
		<interceptors>
			<beans:bean class="org.springframework.integration.config.TestPreSendInterceptor"/>
			<beans:bean class="org.springframework.integration.config.TestAroundSendEndpointInterceptor"/>
		</interceptors>
	</channel-adapter>

	<channel-adapter id="sourceEndpointWithRefInterceptors"
	                 source="testSource"
	                 channel="testChannel">
		<schedule period="100"/>
		<interceptors>
			<ref bean="preInterceptor"/>
			<ref bean="aroundInterceptor"/>
		</interceptors>
	</channel-adapter>

	<beans:bean id="testHandler" class="org.springframework.integration.config.TestHandler"/>

	<beans:bean id="testSource" class="org.springframework.integration.config.TestSource"/>

	<beans:bean id="testTarget" class="org.springframework.integration.config.TestTarget"/>

	<beans:bean id="preInterceptor" class="org.springframework.integration.config.TestPreSendInterceptor"/>

	<beans:bean id="aroundInterceptor" class="org.springframework.integration.config.TestAroundSendEndpointInterceptor"/>

</beans:beans>
