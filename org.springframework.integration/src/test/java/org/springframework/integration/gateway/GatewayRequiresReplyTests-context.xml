<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/integration"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:beans="http://www.springframework.org/schema/beans"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
			http://www.springframework.org/schema/beans/spring-beans.xsd
			http://www.springframework.org/schema/integration
			http://www.springframework.org/schema/integration/spring-integration.xsd">

	<gateway id="gateway"
			 default-request-channel="requestChannel"
			 default-reply-timeout="3000"
			 service-interface="org.springframework.integration.gateway.GatewayRequiresReplyTests$TestService" />
	

	<service-activator input-channel="requestChannel"
					   ref="testBean"
					   requires-reply="true"/>

	<beans:bean id="testBean" class="org.springframework.integration.gateway.GatewayRequiresReplyTests$TestServiceBean"/>

	<gateway id="timeoutGateway"
			 default-request-channel="timeoutChannel"
			 default-reply-timeout="1000"
			 service-interface="org.springframework.integration.gateway.GatewayRequiresReplyTests$TestService" />
			 
	<channel id="timeoutChannel">
		<dispatcher task-executor="executor"/>
	</channel>
			 
	<service-activator input-channel="timeoutChannel">
		<beans:bean class="org.springframework.integration.gateway.GatewayRequiresReplyTests$LongRunningService"/>
	</service-activator>

	<thread-pool-task-executor id="executor" max-size="5"/>

</beans:beans>
