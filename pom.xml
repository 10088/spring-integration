<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<modelVersion>4.0.0</modelVersion>
	<groupId>org.springframework.integration</groupId>
	<artifactId>spring-integration</artifactId>
	<name>Spring Integration</name>
	<version>2.0.0.BUILD-SNAPSHOT</version>
	<packaging>pom</packaging>
	<modules>
		<module>spring-integration-core</module>
		<module>spring-integration-event</module>
		<module>spring-integration-file</module>
		<module>spring-integration-http</module>
		<module>spring-integration-httpinvoker</module>
		<module>spring-integration-ip</module>
		<module>spring-integration-jdbc</module>
		<module>spring-integration-jms</module>
		<module>spring-integration-jmx</module>
		<module>spring-integration-mail</module>
		<module>spring-integration-parent</module>
		<module>spring-integration-rmi</module>
		<module>spring-integration-samples</module>
		<module>spring-integration-security</module>
		<module>spring-integration-stream</module>
		<module>spring-integration-test</module>
		<module>spring-integration-ws</module>
		<module>spring-integration-xml</module>
	</modules>
	<properties>
		<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
	</properties>
	<profiles>
		<profile>
			<id>staging</id>
			<distributionManagement>
				<site>
					<id>staging</id>
					<url>file:///${java.io.tmpdir}/target/site</url>
				</site>
				<repository>
					<id>staging</id>
					<url>file:///${java.io.tmpdir}/target/repository</url>
				</repository>
				<snapshotRepository>
					<id>staging</id>
					<url>file:///${java.io.tmpdir}/target/snapshotRepository</url>
				</snapshotRepository>
			</distributionManagement>
		</profile>
	</profiles>
	<distributionManagement>
		<!-- see 'staging' profile for dry-run deployment settings -->
		<downloadUrl>http://static.springframework.org/spring-integration/site/downloads/releases.html</downloadUrl>
		<repository>
			<id>local</id>
			<url>file://${java.io.tmpdir}/spring-integration-repo</url>
		</repository>
		<snapshotRepository>
			<id>spring-snapshot</id>
			<name>Spring Snapshot Repository</name>
			<url>s3://maven.springframework.org/snapshot</url>
		</snapshotRepository>
		<site>
			<id>static.springframework.org</id>
			<url>scp://static.springframework.org/var/www/domains/springframework.org/static/htdocs/spring-integration/sites/${project.version}</url>
		</site>
	</distributionManagement>
	<build>
		<extensions>
			<extension>
				<!-- available only in the springframework maven repository. see <repositories> section below -->
				<groupId>org.springframework.build.aws</groupId>
				<artifactId>org.springframework.build.aws.maven</artifactId>
				<version>3.0.0.RELEASE</version>
			</extension>
		</extensions>
		<plugins>
			<plugin>
				<groupId>com.agilejava.docbkx</groupId>
				<artifactId>docbkx-maven-plugin</artifactId>
				<version>2.0.6</version>
				<executions>
					<execution>
						<goals>
							<goal>generate-html</goal>
							<goal>generate-pdf</goal>
						</goals>
						<phase>package</phase>
					</execution>
				</executions>
				<dependencies>
					<dependency>
						<groupId>org.docbook</groupId>
						<artifactId>docbook-xml</artifactId>
						<version>4.4</version>
						<scope>runtime</scope>
					</dependency>
				</dependencies>
				<configuration>
					<includes>index.xml</includes>
					<xincludeSupported>true</xincludeSupported>
					<foCustomization>${project.basedir}/src/docbkx/resources/xsl/fopdf.xsl</foCustomization>
					<!-- original spring-build fopdf xsl
					<foCustomization>src/docbkx/resources/xsl/pdf/fopdf.xsl</foCustomization> -->
					<htmlStylesheet>css/html.css</htmlStylesheet>
					<!-- produce single-page html output -->
					<chunkedOutput>false</chunkedOutput>
					<htmlCustomization>${project.basedir}/src/docbkx/resources/xsl/html.xsl</htmlCustomization>
					<!-- produce multi-page html output
					<chunkedOutput>false</chunkedOutput>
					<htmlCustomization>${project.basedir}/src/docbkx/resources/xsl/html_chunk.xsl</htmlCustomization> -->
					<entities>
						<entity>
							<name>version</name>
							<value>${pom.version}</value>
						</entity>
					</entities>
					<postProcess>
						<copy todir="${project.basedir}/target/site/reference">
							<fileset dir="${project.basedir}/target/docbkx">
								<include name="**/*.html" />
								<include name="**/*.pdf" />
							</fileset>
						</copy>
						<copy todir="${project.basedir}/target/site/reference/html">
							<fileset dir="${project.basedir}/src/docbkx/resources">
								<include name="**/*.css" />
								<include name="**/*.png" />
								<include name="**/*.gif" />
								<include name="**/*.jpg" />
							</fileset>
						</copy>
						<move file="${project.basedir}/target/site/reference/pdf/index.pdf"
							tofile="${project.basedir}/target/site/reference/pdf/spring-integration-reference.pdf"
							failonerror="false" />
					</postProcess>
				</configuration>
			</plugin>
			<plugin>
				<artifactId>maven-javadoc-plugin</artifactId>
				<version>2.5</version>
				<executions>
					<execution>
						<id>aggregate</id>
						<goals>
							<goal>aggregate</goal>
						</goals>
						<phase>package</phase>
						<configuration>
							<javadoc:aggregate>true</javadoc:aggregate>
							<breakiterator>true</breakiterator>
							<header>Spring Integration</header>
							<source>1.5</source>
							<quiet>true</quiet>
							<javadocDirectory>${project.basedir}/src/main/javadoc</javadocDirectory>
							<overview>${project.basedir}/src/main/javadoc/overview.html</overview>
							<stylesheetfile>${project.basedir}/src/main/javadoc/spring-javadoc.css</stylesheetfile>
							<!-- copies doc-files subdirectory which contains image resources -->
							<docfilessubdirs>true</docfilessubdirs>
							<groups>
								<group>
									<title>Spring Integration</title>
									<packages>org.springframework.integration.core</packages>
								</group>
								<!-- TODO: fill in other groups -->
							</groups>
							<excludePackageNames>org.springframework.integration.samples</excludePackageNames>
							<links>
								<link>http://static.springframework.org/spring/docs/3.0.2.RELEASE/javadoc-api</link>
								<link>http://java.sun.com/javase/6/docs/api</link>
							</links>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<!-- copies a tightly-controlled set of dependencies into ${project.build.dir}/dependency
				 in order to be added to the distribution jar during the assembly process.

				 WARNING: any new dependencies added to project pom files over time must be added explicitly
				 to this list if they are to make it into the distribution zip.  This section should be
				 considered fragile. Ideally, we would use the 'copy-dependencies' goal of the
				 maven-dependency-plugin, which automatically adds all project dependencies, but it does
				 not offer enough fine-grained control over what jars are added and which are not.

				 NOTE: an unfortunate side effect of this plugin is that it runs not just once, but for
				 every module in the build.  This is annoying but harmless, and adds only a few seconds
				 to the overall build time.  It also creates a false sense of size in the target directories
				 but again this is probably negligible.

				 see src/assembly/distribution.xml
				 see http://maven.apache.org/plugins/maven-dependency-plugin/copy-mojo.html
			<plugin>
				<artifactId>maven-dependency-plugin</artifactId>
				<version>2.1</version>
				<executions>
					<execution>
						<phase>package</phase>
						<goals>
							<goal>copy</goal>
						</goals>
						<configuration>
							<artifactItems>
								<artifactItem>
									<groupId>org.springframework</groupId>
									<artifactId>spring-aop</artifactId>
									<version>${org.springframework.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>org.springframework</groupId>
									<artifactId>spring-asm</artifactId>
									<version>${org.springframework.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>org.springframework</groupId>
									<artifactId>spring-beans</artifactId>
									<version>${org.springframework.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>org.springframework</groupId>
									<artifactId>spring-context</artifactId>
									<version>${org.springframework.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>org.springframework</groupId>
									<artifactId>spring-context-support</artifactId>
									<version>${org.springframework.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>org.springframework</groupId>
									<artifactId>spring-core</artifactId>
									<version>${org.springframework.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>org.springframework</groupId>
									<artifactId>spring-expression</artifactId>
									<version>${org.springframework.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>org.springframework</groupId>
									<artifactId>spring-jdbc</artifactId>
									<version>${org.springframework.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>org.springframework</groupId>
									<artifactId>spring-jms</artifactId>
									<version>${org.springframework.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>org.springframework</groupId>
									<artifactId>spring-oxm</artifactId>
									<version>${org.springframework.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>org.springframework</groupId>
									<artifactId>spring-tx</artifactId>
									<version>${org.springframework.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>org.springframework</groupId>
									<artifactId>spring-web</artifactId>
									<version>${org.springframework.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>org.springframework</groupId>
									<artifactId>spring-webmvc</artifactId>
									<version>${org.springframework.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>org.springframework.security</groupId>
									<artifactId>spring-security-core</artifactId>
									<version>${org.springframework.security.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>org.springframework.ws</groupId>
									<artifactId>spring-ws-core</artifactId>
									<version>${org.springframework.ws.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>org.springframework.ws</groupId>
									<artifactId>spring-xml</artifactId>
									<version>${org.springframework.ws.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>aopalliance</groupId>
									<artifactId>aopalliance</artifactId>
									<version>1.0</version>
								</artifactItem>
								<artifactItem>
									<groupId>commons-codec</groupId>
									<artifactId>commons-codec</artifactId>
									<version>1.3</version>
								</artifactItem>
								<artifactItem>
									<groupId>commons-collections</groupId>
									<artifactId>commons-collections</artifactId>
									<version>3.2</version>
								</artifactItem>
								<artifactItem>
									<groupId>commons-httpclient</groupId>
									<artifactId>commons-httpclient</artifactId>
									<version>3.1</version>
								</artifactItem>
								<artifactItem>
									<groupId>commons-lang</groupId>
									<artifactId>commons-lang</artifactId>
									<version>2.1</version>
								</artifactItem>
								<artifactItem>
									<groupId>commons-logging</groupId>
									<artifactId>commons-logging</artifactId>
									<version>${commons-logging.version}</version>
								</artifactItem>
								<artifactItem>
									<groupId>org.apache.ws.commons.schema</groupId>
									<artifactId>XmlSchema</artifactId>
									<version>1.3.2</version>
								</artifactItem>
							</artifactItems>
						</configuration>
					</execution>
				</executions>
			</plugin>
			-->
			<plugin>
				<!-- run `mvn package assembly:assembly` to trigger assembly creation.
					 see http://www.sonatype.com/books/mvnref-book/reference/assemblies-set-dist-assemblies.html -->
				<artifactId>maven-assembly-plugin</artifactId>
				<version>2.2-beta-5</version>
				<inherited>false</inherited>
					<executions>
						<execution>
							<id>distribution</id>
							<goals>
								<goal>single</goal>
							</goals>
							<phase>package</phase>
							<configuration>
								<descriptors>
									<descriptor>${project.basedir}/src/assembly/distribution.xml</descriptor>
								</descriptors>
								<appendAssemblyId>false</appendAssemblyId>
							</configuration>
						</execution>
					</executions>
			</plugin>
		</plugins>
	</build>
	<repositories>
		<!-- necessary for org.springframework.build.aws.maven dependency -->
		<repository>
			<id>repository.springframework.maven.release</id>
			<name>Spring Framework Maven Release Repository</name>
			<url>http://maven.springframework.org/release</url>
		</repository>
	</repositories>
</project>
